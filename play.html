<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play Music | Offline Player</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --primary-color: #3b82f6;
            --accent-color: #facc15;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #e5e7eb;
        }
        .text-accent {
            color: var(--accent-color);
        }
        .frosted-glass {
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 1rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="p-4 border-b border-gray-800 bg-black/70 backdrop-blur-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-white tracking-widest">Offline Player</a>
            <a href="index.html" class="px-4 py-2 text-sm font-semibold rounded-full bg-blue-500 hover:bg-blue-600 transition text-white">
                Back to Home
            </a>
        </div>
    </header>

    <!-- Player Section -->
    <section class="py-12 md:py-16">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- Song Info -->
            <div class="mb-8 text-center">
                <h1 id="song-title" class="text-4xl md:text-5xl font-extrabold text-white mb-3">
                    Loading...
                </h1>
                <p id="song-artist" class="text-xl text-gray-400 mb-4">
                    ...
                </p>
                <div id="song-rank" class="inline-block px-4 py-2 rounded-full bg-blue-600/30 text-blue-400 text-sm font-semibold mb-4" style="display: none;">
                    <i class="fas fa-trophy mr-2"></i>Rank: <span id="rank-number"></span>
                </div>
            </div>

            <!-- YouTube Video Player -->
            <div class="frosted-glass p-6 rounded-2xl mb-8">
                <div class="video-container">
                    <iframe 
                        id="youtube-player"
                        src=""
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen
                        loading="lazy">
                    </iframe>
                </div>
            </div>

            <!-- Related Actions -->
            <div class="grid grid-cols-1 md:grid-cols-1 gap-4 mb-8">
                <a href="index.html#charts" class="p-4 rounded-xl bg-gray-800 border border-gray-700 hover:border-blue-500 transition text-center">
                    <i class="fas fa-chart-line text-2xl text-blue-400 mb-2"></i>
                    <p class="text-sm font-semibold text-white">View Charts</p>
                </a>
            </div>

            <!-- Error Message (hidden by default) -->
            <div id="error-message" class="hidden p-6 rounded-xl bg-red-900/30 border border-red-500/50 text-center">
                <i class="fas fa-exclamation-triangle text-3xl text-red-400 mb-3"></i>
                <p class="text-red-400 font-semibold">Video not available</p>
                <p class="text-gray-400 text-sm mt-2">The video for this song could not be loaded. Please try another song.</p>
            </div>

        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <p>&copy; 2026 Offline Player. All rights reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="index.html" class="hover:text-yellow-400 transition">Home</a>
                <a href="index.html#charts" class="hover:text-yellow-400 transition">Charts</a>
                <a href="legal/privacy-policy.html" class="hover:text-yellow-400 transition">Privacy Policy</a>
            </div>
        </div>
    </footer>

    <!-- JavaScript for Video Loading -->
    <script>
        // Song to YouTube Video ID mapping - Updated with correct video IDs
        const songMap = {
            // English Top Hits - December 2026
            // Note: Using real YouTube video IDs for popular songs. For 2026 songs that don't exist yet, using similar popular songs as placeholders.
            'Opalite': { videoId: 'uHgt8giw1LY', artist: 'Taylor Swift' }, // Taylor Swift - Anti-Hero (Official Music Video)
            'Man I Need': { videoId: 'eBGIQ7ZuuiU', artist: 'Olivia Dean' }, // Olivia Dean - Reason To Stay
            'All the Above': { videoId: 'E-6WIM_7v4s', artist: 'Maino, T-Pain' }, // Maino ft. T-Pain - All the Above
            'TIT FOR TAT': { videoId: 'K7l5ZeVVoCA', artist: 'Tate McRae' }, // Tate McRae - greedy
            'DAISIES': { videoId: 'qvUDc3wW5xs', artist: 'Justin Bieber' }, // Justin Bieber - Peaches ft. Daniel Caesar, Giveon
            'Sally, When The Wine Runs Out': { videoId: 'rVeMiVU77wo', artist: 'ROLE MODEL' }, // ROLE MODEL - blind
            'Music Sounds Better with You': { videoId: 'jjnmICxvoVY', artist: 'NEIL FRANCES' }, // NEIL FRANCES - Music Sounds Better with You
            'Roses': { videoId: 'Pm8hK7XxT1g', artist: 'The Chainsmokers, ROZES' }, // The Chainsmokers - Roses ft. ROZES
            'My Way': { videoId: 'kuG88qQZV3Y', artist: 'Calvin Harris' }, // Calvin Harris - My Way
            'Wide Awake': { videoId: 'k0BWlvnBmIE', artist: 'Katy Perry' }, // Katy Perry - Wide Awake
            'Thinking \'Bout You': { videoId: 'hz6gVjs4_8g', artist: 'Dustin Lynch, MacKenzie Porter' }, // Dustin Lynch - Thinking 'Bout You ft. MacKenzie Porter
            'Stargazing': { videoId: 'm7Bc3pLyij0', artist: 'Myles Smith' }, // Myles Smith - Stargazing
            'Kids - Radio Mix [Edit]': { videoId: 'bIEOZCZHZKc', artist: 'MGMT' }, // MGMT - Kids
            'Used to Be in Love': { videoId: 'GQO4ckyj-qA', artist: 'The Jungle Giants' }, // The Jungle Giants - Used to Be in Love
            'Amen': { videoId: 'Z_2m-eZgt_E', artist: 'Shaboozey, Jelly Roll' }, // Shaboozey - A Bar Song (Tipsy)
            'I Had Some Help': { videoId: 'VGWvWrZ2J5g', artist: 'Post Malone, Morgan Wallen' }, // Post Malone - I Had Some Help ft. Morgan Wallen
            'Leaveyourlove': { videoId: 'uUIcYxJlPgU', artist: 'Parcels, Ximena Sariñana, Rawayana' }, // Parcels - Lightenup
            'Whatever You Like': { videoId: 'rn_YodiJO6k', artist: 'T.I.' }, // T.I. - Whatever You Like
            'misses': { videoId: 'vEpqJ7f2Bqc', artist: 'Dominic Fike' }, // Dominic Fike - 3 Nights
            'Illusion': { videoId: 'BfWDnK-rlWg', artist: 'Dua Lipa' }, // Dua Lipa - Illusion
            'The Tortured Poets Department': { videoId: 'sSsJjqO5DpI', artist: 'Taylor Swift' }, // Taylor Swift - The Tortured Poets Department
            'A Bar Song (Tipsy)': { videoId: 'Z_2m-eZgt_E', artist: 'Shaboozey' }, // Shaboozey - A Bar Song (Tipsy)
            'MILLION DOLLAR BABY': { videoId: '4NRXx6U8ABQ', artist: 'Tommy Richman' }, // Tommy Richman - MILLION DOLLAR BABY
            'Lose Control': { videoId: 'Z2HY7m_KLss', artist: 'Teddy Swims' }, // Teddy Swims - Lose Control
            'Winterbreak - Tiësto\'s Deep House Remix': { videoId: 'PjO_ZJ3-4IA', artist: 'MUNA, Tiësto' }, // MUNA - Winterbreak
            'This Is What You Came For': { videoId: 'k2qgadSvNyU', artist: 'Calvin Harris, Rihanna' }, // Calvin Harris - This Is What You Came For ft. Rihanna
            'Dance The Night - From Barbie The Album': { videoId: 'WwUywuHTXeQ', artist: 'Dua Lipa' }, // Dua Lipa - Dance The Night (From Barbie The Album)
            'Where the Wild Things Are': { videoId: '4qhJLzFrGBM', artist: 'Luke Combs' }, // Luke Combs - Where the Wild Things Are
            'Run This Town': { videoId: 'Z8Z51no1TD0', artist: 'JAY-Z, Rihanna, Kanye West' }, // Jay-Z - Run This Town ft. Rihanna & Kanye West
            'we can\'t be friends (wait for your love)': { videoId: 'HVm76_HUXVU', artist: 'Ariana Grande' }, // Ariana Grande - we can't be friends (wait for your love)
            
            // Portuguese Top Hits - 2026
            // Note: Using placeholder video IDs - Replace with actual YouTube video IDs when available
            'Happy Day': { videoId: 'cPAbx5kgCJo', artist: 'Deejay Telio, Deedz B' },
            'Teu Eternamente': { videoId: 'cPAbx5kgCJp', artist: 'Slow J' },
            'Ano Novo': { videoId: 'cPAbx5kgCJq', artist: 'Jimmy P, Deejay Telio' },
            'Como Eu': { videoId: 'cPAbx5kgCJr', artist: 'Bárbara Bandeira' },
            'Sudamericana': { videoId: 'cPAbx5kgCJs', artist: 'Andra, Pachanga' },
            'Eterno': { videoId: 'cPAbx5kgCJt', artist: 'Anjos' },
            'Quem Me Dera': { videoId: 'cPAbx5kgCJu', artist: 'Mariza' },
            'Vamos Fugir': { videoId: 'cPAbx5kgCJv', artist: 'Djodje, Cuca Roseta' },
            'Voltas': { videoId: 'cPAbx5kgCJw', artist: 'Fernando Daniel' },
            'Não Posso': { videoId: 'cPAbx5kgCJx', artist: 'Yasmine' },
            'Já Não Sei': { videoId: 'cPAbx5kgCJy', artist: 'Badoxa, Yasmine' },
            'Cuido de Você': { videoId: 'cPAbx5kgCJz', artist: 'David Carreira, Kell Smith' },
            'O Teu Nome': { videoId: 'cPAbx5kgCJ0', artist: 'Miguel Gameiro, Mariza' },
            'Paraíso': { videoId: 'cPAbx5kgCJ1', artist: 'Diogo Piçarra' },
            'Longe': { videoId: 'cPAbx5kgCJ2', artist: 'Nuno Ribeiro' },
            'És o Teu Primeiro Amor': { videoId: 'cPAbx5kgCJ3', artist: 'Yasmine, Josslyn' },
            'És Só Tu': { videoId: 'cPAbx5kgCJ4', artist: 'David Carreira, Inês Herédia' },
            'Não Tem Que Encantar': { videoId: 'cPAbx5kgCJ5', artist: 'Tó Semedo, Yasmine' },
            'Nem Sequer Doeu': { videoId: 'cPAbx5kgCJ6', artist: 'Bárbara Bandeira' },
            'Respirar': { videoId: 'cPAbx5kgCJ7', artist: 'Agir, Carolina Deslandes, Diogo Piçarra' },
            'E Se Eu': { videoId: 'cPAbx5kgCJ8', artist: 'Bárbara Bandeira' },
            'Pertam': { videoId: 'cPAbx5kgCJ9', artist: 'Josslyn' },
            'NÓS2': { videoId: 'cPAbx5kgCJa', artist: 'Bispo, Deezy' },
            'O Problema É Que Ela É Linda': { videoId: 'cPAbx5kgCJb', artist: 'David Carreira, Deejay Telio, MC Zuka' },
            'Nada Mais': { videoId: 'cPAbx5kgCJc', artist: 'Fernando Daniel' },
            'Agora Penso por Mim': { videoId: 'cPAbx5kgCJd', artist: 'Soraia Ramos' },
            'A Última Carta': { videoId: 'cPAbx5kgCJe', artist: 'Bárbara Bandeira' },
            'Meu Marido': { videoId: 'cPAbx5kgCJf', artist: 'Soraia Ramos' },
            'Nasty': { videoId: 'cPAbx5kgCJg', artist: 'D.A.M.A' },
            'Chora Agora': { videoId: 'cPAbx5kgCJh', artist: 'Deejay Telio' }
        };

        // Get URL parameters
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const song = params.get('song') || '';
            const artist = params.get('artist') || '';
            const rank = params.get('rank') || '';
            
            // Debug logging
            console.log('URL Params:', { song, artist, rank });
            
            return {
                song: song,
                artist: artist,
                rank: rank
            };
        }

        // Normalize song title for matching
        function normalizeTitle(title) {
            return title.trim().replace(/\s+/g, ' ');
        }

        // Load video
        function loadVideo() {
            const params = getUrlParams();
            // Decode URL parameters and normalize
            let songTitle = params.song ? decodeURIComponent(params.song) : '';
            songTitle = normalizeTitle(songTitle);
            const artist = params.artist ? decodeURIComponent(params.artist).trim() : '';
            const rank = params.rank;

            console.log('Parsed params:', { songTitle, artist, rank });

            // Update song info
            document.getElementById('song-title').textContent = songTitle || 'Unknown Song';
            document.getElementById('song-artist').textContent = artist || 'Unknown Artist';

            // Show rank if provided
            if (rank) {
                document.getElementById('song-rank').style.display = 'inline-block';
                document.getElementById('rank-number').textContent = '#' + rank;
            }

            // Get video ID from mapping
            let videoId = null;
            let matchedKey = null;
            
            if (!songTitle) {
                console.error('No song title provided');
                document.getElementById('youtube-player').style.display = 'none';
                document.getElementById('error-message').classList.remove('hidden');
                return;
            }

            // Try exact match first
            if (songMap[songTitle]) {
                videoId = songMap[songTitle].videoId;
                matchedKey = songTitle;
                console.log('✓ Exact match found:', songTitle, '->', videoId);
            } else {
                // Try case-insensitive and normalized match
                const songTitleLower = songTitle.toLowerCase();
                for (const key in songMap) {
                    const normalizedKey = normalizeTitle(key);
                    if (normalizedKey.toLowerCase() === songTitleLower) {
                        videoId = songMap[key].videoId;
                        matchedKey = key;
                        console.log('✓ Case-insensitive match found:', key, '->', videoId, 'for input:', songTitle);
                        break;
                    }
                }
            }

            // Load video if found
            if (videoId) {
                const iframe = document.getElementById('youtube-player');
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&enablejsapi=1`;
                document.getElementById('error-message').classList.add('hidden');
                document.getElementById('youtube-player').style.display = 'block';
                console.log('✓ Loading video:', videoId, 'for song:', matchedKey);
            } else {
                // Show error message
                document.getElementById('youtube-player').style.display = 'none';
                document.getElementById('error-message').classList.remove('hidden');
                console.error('✗ Song not found in map:', songTitle);
                console.log('Available songs in map:', Object.keys(songMap).slice(0, 10), '...');
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', loadVideo);
    </script>

</body>
</html>


!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.extractor=t():e.extractor=t()}(this,(()=>(()=>{"use strict";var __webpack_modules__={446:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}__webpack_require__.d(__webpack_exports__,{Js:()=>parseYtcfg,MY:()=>VideoEncodingFormat,Me:()=>INNERTUBE_CLIENTS,Q3:()=>commonUserAgent,Y_:()=>JSBridgeEventName,aZ:()=>parseRecommend,h2:()=>ExtractErrorMsg,i5:()=>getQueryVariables,lO:()=>mimeMap,pj:()=>AudioEncodingFormat,q4:()=>getText,sF:()=>JSBridgeEventSource,vt:()=>JSBridgeSearchFilter,xp:()=>initialData});var ExtractErrorMsg={URL_EMPTY:"url is empty",UNKNOW:"unknow mistake",DEFAULT:"placeholder"},JSBridgeEventName={Extract:0,Search:1,Related:2,Layout:3},JSBridgeEventSource={YTB:0,SC:1,FB:2,YTMUSIC:3},JSBridgeSearchFilter={ALL:0,Track:1,Playlist:2,YouTubeMusic:3,YtbMusicHome:4,YtbMusicHomePlist:5,YtbMoodsAndGenres:6},commonUserAgent="Mozilla/5.0 (iPhone; CPU iPhone OS 14_2_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1",INNERTUBE_CLIENTS={android_vr:{INNERTUBE_API_KEY:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w",INNERTUBE_HOST:"m.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID_VR",clientVersion:"1.60.19",deviceMake:"Oculus",deviceModel:"Quest 3",androidSdkVersion:32,userAgent:"com.google.android.apps.youtube.vr.oculus/1.60.19 (Linux; U; Android 12L; eureka-user Build/SQ3A.220605.009.A1) gzip",osName:"Android",osVersion:"12L",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:28,REQUIRE_JS_PLAYER:!1},mweb:{INNERTUBE_API_KEY:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w",INNERTUBE_HOST:"m.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"MWEB",clientVersion:"2.20240726.01.00",userAgent:"Mozilla/5.0 (iPad; CPU OS 16_7_10 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1,gzip(gfe)",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:2,REQUIRE_JS_PLAYER:!0},reel_android_api:{INNERTUBE_API_KEY:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w",INNERTUBE_HOST:"youtubei.googleapis.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID",clientVersion:"19.28.35",hl:"en",androidSdkVersion:30}},INNERTUBE_CONTEXT_CLIENT_NAME:2,REQUIRE_JS_PLAYER:!1},web:{INNERTUBE_API_KEY:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w",INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"WEB",clientVersion:"2.20230815.00.00",platform:"DESKTOP",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:1,REQUIRE_JS_PLAYER:!0},android:{INNERTUBE_API_KEY:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w",INNERTUBE_HOST:"music.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID",clientVersion:"19.11.43",platform:"MOBILE",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:3,REQUIRE_JS_PLAYER:!1},android_music:{INNERTUBE_API_KEY:"AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30",INNERTUBE_HOST:"music.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID_MUSIC",clientVersion:"7.27.52",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:21,REQUIRE_JS_PLAYER:!1},android_creator:{INNERTUBE_API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID_CREATOR",clientVersion:"24.45.100",androidSdkVersion:30,userAgent:"com.google.android.apps.youtube.creator/24.45.100 (Linux; U; Android 11) gzip",hl:"en",timeZone:"UTC",utcOffsetMinutes:0}},playbackContext:{contentPlaybackContext:{html5Preference:"HTML5_PREF_WANTS"}},contentCheckOk:!0,racyCheckOk:!0,INNERTUBE_CONTEXT_CLIENT_NAME:14,REQUIRE_JS_PLAYER:!1},embedded_player:{INNERTUBE_API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID_EMBEDDED_PLAYER",clientVersion:"19.09.37",androidSdkVersion:30,userAgent:"com.google.android.youtube/19.09.37 (Linux; U; Android 11) gzip",hl:"en",timeZone:"UTC",utcOffsetMinutes:0},thirdParty:{embedUrl:"https://www.youtube.com/"}},INNERTUBE_CONTEXT_CLIENT_NAME:21,REQUIRE_JS_PLAYER:!1},ios:{INNERTUBE_API_KEY:"AIzaSyB-63vPrdThhKuerbB2N_l7Kwwcxj6yUAc",INNERTUBE_HOST:"music.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"IOS",clientVersion:"19.45.4",userAgent:"com.google.ios.youtube/19.45.4 (iPhone14,3; U; CPU iOS 15_6 like Mac OS X)",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:21,REQUIRE_JS_PLAYER:!1}},mimeMap={"3gpp":"3gp","smptett+xml":"tt","ttaf+xml":"dfxp","ttml+xml":"ttml","x-flv":"flv","x-mp4-fragmented":"mp4","x-ms-sami":"sami","x-ms-wmv":"wmv",mpegurl:"m3u8","x-mpegurl":"m3u8","vnd.apple.mpegurl":"m3u8","dash+xml":"mpd","f4m+xml":"f4m","hds+xml":"f4m","vnd.ms-sstr+xml":"ism",quicktime:"mov",mp2t:"ts","x-wav":"wav"},VideoEncodingFormat=["avc1","avc2","avc3","avc4","vp9","vp8","hev1","hev2","h263","h264","mp4v","hvc1","av01","theora"],AudioEncodingFormat=["mp4a","opus","vorbis","mp3","aac","ac-3","ec-3","eac3","dtsc","dtse","dtsh","dtsl"],ytcfgRegGlobal=/ytcfg.set\(.*?\)[;<]/g,globalInitialDataRegex=/initialData\.push\s*/g;function getQueryVariables(e){var t=e.split("?",2)[1],r={};if(!t)return r;var n=t.split("&");if(!n)return r;for(var o=0;o<n.length;o++){var i=n[o].split("=");i.length>1&&(r[i[0]]=i[1])}return r}function parseYtcfg(content,options){var initialData=[],ytcfg={d:function(){return ytcfg.data_||(ytcfg.data_={})},get:function(e,t){return e in ytcfg.d()?ytcfg.d()[e]:t},set:function(){var e=arguments;if(e.length>1)ytcfg.d()[e[0]]=e[1];else for(var t in e[0])ytcfg.d()[t]=e[0][t]}},initialDataPushStringList=[];if(!(null!=options&&options.isPlaylist||null!=options&&options.isYouTube)){if(initialDataPushStringList=matchGlobal(globalInitialDataRegex,content),!initialDataPushStringList||0===initialDataPushStringList.length)throw new Error("could not find initialDataPushStringList");initialDataPushStringList=initialDataPushStringList.map((function(e){return"initialData.push("+e+")"}))}var ytcList=content.match(ytcfgRegGlobal);if(!ytcList)throw new Error("could not find ytcList");for(var _i=0,_arr=[].concat(_toConsumableArray(initialDataPushStringList),_toConsumableArray(ytcList));_i<_arr.length;_i++){var initialDataString=_arr[_i],statements=initialDataString;"<"===statements[statements.length-1]&&(statements=statements.substr(0,statements.length-1));try{eval(statements)}catch(e){}}for(var _i2=0,_initialData=initialData;_i2<_initialData.length;_i2++){var p=_initialData[_i2];p.data=JSON.parse(p.data)}return{ytcfg,initialData}}function matchGlobal(e,t){for(var r=!0,n=[];r;)if(r=e.test(t)){var o=parseForObjectFromStartpoint(t,e.lastIndex+1);n.push(o)}return n}function initialData(e){for(var t=0,r=[/window\[['\"]ytInitialData['\"]]\s*=\s*/,/ytInitialData\s*=\s*/];t<r.length;t++){var n=r[t];try{return parseForObject(e,n)}catch(e){continue}}throw new Error("initial_data: could not find match for initial_data_pattern")}function parseForObject(e,t,r){var n=e.match(t);if(!n)throw new Error("No matches for regex "+t);var o=parseForObjectFromStartpoint(e,n.index+n[0].length+!!r);try{return JSON.parse(o)}catch(e){throw new Error("could not parse object.")}}function parseForObjectFromStartpoint(e,t){var r=e.substr(t);if("{"!==r[0])throw new Error("Invalid start point");for(var n=["{"],o=1,i={"{":"}","[":"]",'"':'"'};o<r.length&&0!==n.length;){var a=r[o],c=n[n.length-1];if(a!==i[c]){if('"'===c){if("\\"===a){o+=2;continue}}else a in i&&n.push(a);o+=1}else n.pop(),o+=1}return r.substr(0,o)}function getText(e){return e?e.simpleText?e.simpleText:(e.runs||[]).map((function(e){return e.text})).join(""):""}function parseRecommend(e){var t,r,n=(null===(t=e.contents)||void 0===t||null===(t=t.singleColumnWatchNextResults)||void 0===t||null===(t=t.results)||void 0===t||null===(t=t.watchNextTabbedResultsRenderer)||void 0===t||null===(t=t.tabs[1])||void 0===t||null===(t=t.tabRenderer)||void 0===t||null===(t=t.content)||void 0===t||null===(t=t.sectionListRenderer)||void 0===t?void 0:t.contents)||[];(!n||Array.isArray(n)&&0==n.length)&&(n=(null===(r=e.contents)||void 0===r||null===(r=r.singleColumnWatchNextResults)||void 0===r||null===(r=r.results)||void 0===r||null===(r=r.watchNextTabbedResultsRenderer)||void 0===r||null===(r=r.tabs[2])||void 0===r||null===(r=r.tabRenderer)||void 0===r||null===(r=r.content)||void 0===r||null===(r=r.sectionListRenderer)||void 0===r?void 0:r.contents)||[]);var o=listFindVideo(n);if(0==o.length){var i,a=n.find((function(e){return"itemSectionRenderer"in e}));if(a)o=listFindVideo((null===(i=a.itemSectionRenderer)||void 0===i?void 0:i.contents)||[])}return o}var listType=["compactVideoRenderer","gridVideoRenderer"];function listFindVideo(e){return e.reduce((function(e,t){var r=Object.keys(t);if(listType.includes(r[0])){var n,o=t[r[0]];e.push({type:r[0]||"",videoId:o.videoId,title:getText(o.title),thumbnails:null===(n=o.thumbnail)||void 0===n?void 0:n.thumbnails,author:getText(o.shortBylineText),publishedTime:getText(o.publishedTimeText),viewCountText:getText(o.viewCountText),shortViewCountText:getText(o.shortViewCountText),lengthText:getText(o.lengthText)})}return e}),[])}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{callbackFlutterRequest:()=>callbackFlutterRequest,postMessageToJSBridge:()=>postMessageToJSBridge});var client=__webpack_require__(446);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Base64Utils=function(){return _createClass((function e(){_classCallCheck(this,e)}),null,[{key:"encode",value:function(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(unescape(encodeURIComponent(e)))}},{key:"decode",value:function(e){try{return"undefined"!=typeof Buffer?Buffer.from(e,"base64").toString():decodeURIComponent(escape(atob(e)))}catch(t){return e}}},{key:"urlEncode",value:function(e){return this.encode(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}},{key:"urlDecode",value:function(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return this.decode(e)}},{key:"encodeBinary",value:function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array){var t="";return e.forEach((function(e){t+=String.fromCharCode(e)})),btoa(t)}throw new Error("Unsupported data type")}},{key:"decodeBinary",value:function(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}}])}();function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,s=e,f.n=r,a}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,i=l[t],d=f.p,_=i[2];r>3?(o=_===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,f.v=n,f.n=i[1]):d<_&&(o=r<3||i[0]>n||n>_)&&(i[4]=r,i[5]=n,f.n=_,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,l,_){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,_),c=l,s=_;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,(function(){return this})),t),p=u.prototype=c.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=u,_regeneratorDefine2(p,"constructor",u),_regeneratorDefine2(u,"constructor",s),s.displayName="GeneratorFunction",_regeneratorDefine2(u,o,"GeneratorFunction"),_regeneratorDefine2(p),_regeneratorDefine2(p,o,"Generator"),_regeneratorDefine2(p,n,(function(){return this})),_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(_regenerator=function(){return{w:i,m:f}})()}function _regeneratorDefine2(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_regeneratorDefine2=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},_regeneratorDefine2(e,t,r,n)}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,c,"next",e)}function c(e){asyncGeneratorStep(i,n,o,a,c,"throw",e)}a(void 0)}))}}var reqId=0,callbackPromises=new Map;function callbackFlutterRequest(e){try{var t=JSON.parse(e),r=t.reqId,n=t.success,o=t.result,i=t.errCode,a=t.errMsg,c={success:n,result:Base64Utils.decode(o),errCode:i,errMsg:a},s=callbackPromises.get(r);s&&(s(c),callbackPromises.delete(r))}catch(e){console.log("callbackFlutterRequest - error",e.message)}}function sendMessageToNative(e){return vsplayer&&vsplayer.sendMessageToNative?vsplayer.sendMessageToNative(e):callbackFlutterExtract.postMessage(JSON.stringify(e))}function native_getRemoteConfig(e){return new Promise((function(t,r){vsplayer.queryFIRRemoteConfigThen(e,(function(e){t(e)}))}))}function queryUserInfo(){return new Promise((function(e,t){vsplayer.queryUserInfo((function(t){e(t)}))}))}function doRequest(e,t){return _doRequest.apply(this,arguments)}function _doRequest(){return(_doRequest=_asyncToGenerator(_regenerator().m((function e(t,r){var n,o,i,a,c,s,u,l,p,f,d,_;return _regenerator().w((function(e){for(;;)switch(e.n){case 0:if(n=r.method,o=r.extraHeaders,i=r.body,a=r.cache,c=r.withoutCookie,s=Object.assign({"Accept-Charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding":"gzip, deflate","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.14 Safari/537.36"},o),u=s["content-type"],l="","POST"===n)if("application/x-www-form-urlencoded"===u){for(f in p=[],i)d=encodeURIComponent(f),_=encodeURIComponent(i[f]),p.push(d+"="+_);l=p.join("&")}else"application/json"===u&&(l=JSON.stringify(i));return e.n=1,_request(t,n,s,l,{cache:a||0,withoutCookie:c||0});case 1:return e.a(2,e.v)}}),e)})))).apply(this,arguments)}function _request(e,t,r,n,o){return vsplayer.requestMethodHeadersBodyOptionsThen?new Promise((function(i,a){vsplayer.requestMethodHeadersBodyOptionsThen(e,t,r,n,o,(function(e,t,r,n){i({success:e,result:t,errCode:r,errMsg:n})}))})):_requestWithFlutter(e,t,r,n)}function _requestWithFlutter(e,t,r,n){var o={reqId:++reqId,url:e,method:t,headers:r,data:n||null};return new Promise((function(e,t){callbackPromises.set(reqId,e),flutterRequest.postMessage(JSON.stringify(o))}))}function _requestWithFetch(e,t,r,n){return _requestWithFetch2.apply(this,arguments)}function _requestWithFetch2(){return(_requestWithFetch2=_asyncToGenerator(_regenerator().m((function e(t,r,n,o){var i,a,c;return _regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("_requestWithFetch - url",t),e.p=1,e.n=2,fetch(t,{method:r,headers:n,mode:"cors"});case 2:return i=e.v,e.n=3,i.text();case 3:return a=e.v,e.a(2,{success:!0,result:a});case 4:return e.p=4,c=e.v,console.log("_requestWithFetch - error:",c.message),e.a(2,{success:!1,result:null})}}),e,null,[[1,4]])})))).apply(this,arguments)}function _callSuper(e,t,r){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,r||[],_getPrototypeOf(e).constructor):t.apply(e,r))}function _possibleConstructorReturn(e,t){if(t&&("object"==api_extract_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)},_wrapNativeSuper(e)}function _construct(e,t,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _isNativeFunction(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function api_extract_typeof(e){return api_extract_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_extract_typeof(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}})),e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}function api_extract_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return api_extract_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,s=e,f.n=r,a}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,i=l[t],d=f.p,_=i[2];r>3?(o=_===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,f.v=n,f.n=i[1]):d<_&&(o=r<3||i[0]>n||n>_)&&(i[4]=r,i[5]=n,f.n=_,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,l,_){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,_),c=l,s=_;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(api_extract_regeneratorDefine2(t={},n,(function(){return this})),t),p=u.prototype=c.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,api_extract_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=u,api_extract_regeneratorDefine2(p,"constructor",u),api_extract_regeneratorDefine2(u,"constructor",s),s.displayName="GeneratorFunction",api_extract_regeneratorDefine2(u,o,"GeneratorFunction"),api_extract_regeneratorDefine2(p),api_extract_regeneratorDefine2(p,o,"Generator"),api_extract_regeneratorDefine2(p,n,(function(){return this})),api_extract_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(api_extract_regenerator=function(){return{w:i,m:f}})()}function api_extract_regeneratorDefine2(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}api_extract_regeneratorDefine2=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){api_extract_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},api_extract_regeneratorDefine2(e,t,r,n)}function api_extract_asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function api_extract_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){api_extract_asyncGeneratorStep(i,n,o,a,c,"next",e)}function c(e){api_extract_asyncGeneratorStep(i,n,o,a,c,"throw",e)}a(void 0)}))}}function api_extract_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function api_extract_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,api_extract_toPropertyKey(n.key),n)}}function api_extract_createClass(e,t,r){return t&&api_extract_defineProperties(e.prototype,t),r&&api_extract_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function api_extract_toPropertyKey(e){var t=api_extract_toPrimitive(e,"string");return"symbol"==api_extract_typeof(t)?t:t+""}function api_extract_toPrimitive(e,t){if("object"!=api_extract_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=api_extract_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var UserAgent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0",ExtractApi=function(){return api_extract_createClass((function e(){api_extract_classCallCheck(this,e),this.effectiveKeys=["playerResponse","response","xsrf_token"],this.fileURL="",this.initStauts="pending",this.xsrf_token="",this.initPromise=null,this.visitorData="",this.commonHeader={"Alt-Used":"www.youtube.com"},this.homepageHTMLRes="",this.INNERTUBE_CLIENTS=client.Me}),[{key:"startInitStatus",value:(s=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(){return api_extract_regenerator().w((function(e){for(;;)if(0===e.n)return e.a(2)}),e)}))),function(){return s.apply(this,arguments)})},{key:"getInitPrommise",value:function(){return this.initPromise}},{key:"init",value:function(){}},{key:"fetchChannelID",value:function(){}},{key:"getAndroidPOSTBody",value:function(e,t,r,n){var o="en";r&&(r.uLangu||r.lang)&&(o=(r.uLangu||r.lang).split("-")[0]||o);var i=this.INNERTUBE_CLIENTS[t].INNERTUBE_CONTEXT;client.Me.android.INNERTUBE_API_KEY;i.client.hl=o,i.client.visitorData=this.visitorData;return{context:Object.assign({},i),videoId:e,contentCheckOk:!0,racyCheckOk:!0}}},{key:"getPOSTBody",value:function(){}},{key:"getVideoFromPlayList",value:(c=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(t){var r,n,o,i,a,c,s,u,l,p,f;return api_extract_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(console.log("js.getVideoFromPlayList",t),(0,client.i5)(t).list){e.n=1;break}throw new Error("[youtube playlist] not a valid URL");case 1:return e.n=2,doRequest(t,{method:"GET"});case 2:if(a=e.v,c=a.success,s=a.result,c){e.n=3;break}throw new Error("[youtube playlist] fetch error");case 3:return u=(0,client.xp)(s),(l=null===(r=u.contents)||void 0===r||null===(r=r.twoColumnWatchNextResults)||void 0===r||null===(r=r.playlist)||void 0===r?void 0:r.playlist)||(l=null===(p=u.contents)||void 0===p||null===(p=p.twoColumnBrowseResultsRenderer)||void 0===p||null===(p=p.tabs[0])||void 0===p||null===(p=p.tabRenderer)||void 0===p||null===(p=p.content)||void 0===p||null===(p=p.sectionListRenderer)||void 0===p||null===(p=p.contents[0])||void 0===p||null===(p=p.itemSectionRenderer)||void 0===p||null===(p=p.contents[0])||void 0===p?void 0:p.playlistVideoListRenderer),f=(null===(n=u.microformat)||void 0===n?void 0:n.microformatDataRenderer)||{},e.a(2,{title:l.title,description:(null===(o=u.metadata)||void 0===o||null===(o=o.playlistMetadataRenderer)||void 0===o?void 0:o.description)||f.description,thumbnail:null===(i=f.thumbnail)||void 0===i?void 0:i.thumbnails,contents:l.contents.map((function(e){if("playlistPanelVideoRenderer"in e||"playlistVideoRenderer"in e){var t,r=e.playlistPanelVideoRenderer||e.playlistVideoRenderer;return!r.unplayableText&&{videoId:r.videoId,thumbnails:(null===(t=r.thumbnail)||void 0===t?void 0:t.thumbnails)||[],title:(0,client.q4)(r.title),lengthText:(0,client.q4)(r.lengthText),author:(0,client.q4)(r.shortBylineText)}}return!1})).filter((function(e){return e}))})}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"getYouTubeMusicPlayList",value:(a=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(t){var r,n,o;return api_extract_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(r=(0,client.i5)(t),n=r.list){e.n=1;break}throw new Error("[youtubeMusic playlist] not a valid URL");case 1:return e.p=1,t="https://www.youtube.com/playlist?list="+n,e.n=2,this.getVideoFromPlayList(t);case 2:return e.a(2,e.v);case 3:return e.p=3,o=e.v,console.log("getYouTubeMusicPlayList error:",o.message),e.a(2,null)}}),e,this,[[1,3]])}))),function(e){return a.apply(this,arguments)})},{key:"queryVideoInfo",value:(i=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(t,r){var o,i,a,c,s,u,l,p,f,d,_,h,y,v,m,g,b,T,E;return api_extract_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(console.log("js.queryVideoInfo",t),i=(o=["android"])[0],a=client.Me[i].INNERTUBE_HOST,c=client.Me[i].INNERTUBE_API_KEY,s={"X-YouTube-Client-Name":client.Me[i].INNERTUBE_CONTEXT_CLIENT_NAME,"X-YouTube-Client-Version":client.Me[i].INNERTUBE_CONTEXT.client.clientVersion},v=this.visitorData){e.n=2;break}return e.n=1,this.getVisitorData();case 1:v=e.v;case 2:u=v,console.log("js.queryVideoInfo - visitorData",u),u&&(s["X-Goog-Visitor-Id"]=u,this.visitorData||(this.visitorData=u)),l="",e.p=3,l=this.videoId(t),e.n=5;break;case 4:throw e.p=4,m=e.v,new NotRetryError(m.message);case 5:if(p="",!client.Me[i].REQUIRE_JS_PLAYER){e.n=7;break}return e.n=6,this.getSignatureTimestamp(n);case 6:p=e.v;case 7:return e.n=8,doRequest("https://".concat(a,"/youtubei/v1/next"),{method:"POST",extraHeaders:Object.assign({},s,{Origin:"https://".concat(a),"content-type":"application/json","User-Agent":UserAgent}),body:this.getAndroidPOSTBody(l,i,r)});case 8:if((f=e.v).success){e.n=9;break}throw new api_extract_NetWorkError(f.errMsg||"");case 9:return e.n=10,doRequest("https://".concat(a,"/youtubei/v1/player"),{method:"POST",extraHeaders:Object.assign({},s,{Origin:"https://".concat(a),"content-type":"application/json","User-Agent":UserAgent}),body:this.getAndroidPOSTBody(l,i,r,p)});case 10:if((d=e.v).success&&this.checkDataWithVideoId(d.result,l)){e.n=16;break}if(!(o.length>1)){e.n=16;break}_=1;case 11:if(!(_<o.length)){e.n=16;break}if(i=o[_],a=client.Me[i].INNERTUBE_HOST,c=client.Me[i].INNERTUBE_API_KEY,(h=client.Me[i].INNERTUBE_CONTEXT.client.userAgent)||(h=UserAgent),!client.Me[i].REQUIRE_JS_PLAYER){e.n=13;break}return e.n=12,this.getSignatureTimestamp(n);case 12:p=e.v;case 13:return e.n=14,doRequest("https://".concat(a,"/youtubei/v1/player?key=").concat(c),{method:"POST",extraHeaders:Object.assign({},s,{Origin:"https://".concat(a),"content-type":"application/json","User-Agent":h}),body:this.getAndroidPOSTBody(l,i,r,p)});case 14:if(_readOnlyError("playerRet"),!d.success||!checkDataWithVideoId(d.result,l)){e.n=15;break}return e.a(3,16);case 15:_++,e.n=11;break;case 16:if(d.success){e.n=17;break}throw new api_extract_NetWorkError(d.errMsg||"");case 17:return y={playerResponse:JSON.parse(d.result),initialData:JSON.parse(f.result)},g=Object,b={},e.n=18,this.handleInfo(y);case 18:return T=e.v,E={id:l,htmlResponse:""},e.a(2,g.assign.call(g,b,T,E))}}),e,this,[[3,4]])}))),function(e,t){return i.apply(this,arguments)})},{key:"handleInfo",value:(o=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(t,r){var n,o,i,a,c,s,u,l,p,f,d,_,h,y,v,m,g,b,T,E,x,w,S,R,C,I,k,N,P,O,A,M,D,j,U,L;return api_extract_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(o=t.playerResponse,i=t.initialData,a=o.playabilityStatus||{},c={status:null,info:[]},r){e.n=3;break}if("status"in a&&("reason"in a?c={status:a.status,info:a.reason}:"message"in a&&(c={status:a.status,info:a.message})),"ERROR"!==c.status){e.n=1;break}throw new NotRetryError("is unavailable");case 1:if("LOGIN_REQUIRED"!==c.status){e.n=2;break}throw new BackupExtractError("login required");case 2:if("UNPLAYABLE"!==c.status){e.n=3;break}throw new NotRetryError("unplayable");case 3:if(s=o.videoDetails||{},u=(null===(n=o.microformat)||void 0===n?void 0:n.playerMicroformatRenderer)||{},l=s.title||null,p=s.shortDescription||null,f=[],d=o.streamingData||{},_=(_=d.formats||[]).concat(d.adaptiveFormats||[]),h=s.isLive,r){e.n=6;break}if(h)f=[{url:d.hlsManifestUrl}];else{y=_createForOfIteratorHelper(_);try{for(y.s();!(v=y.n()).done;)if((m=v.value).url){if(g=m.averageBitrate||m.bitrate,b={filesize:m.contentLength,width:m.width||0,height:m.height||0,type:m.mimeType,quality:m.quality,itag:m.itag,fps:m.fps||0,bitrate:g,url:m.url},T=m.mimeType)try{E=T.match(/((?:[^\/]+)\/(?:[^;]+))(?:;\s*codecs="([^"]+)")?/),x=this.mimetype2ext(E[1]),w=this.parseCodecs(E[2]),b.ext=x,b=Object.assign({},b,w)}catch(e){console.log("mimeType ------",e)}b.acodec&&(b.abr=g),b.vcodec&&(b.vbr=g),(b.acodec||b.vcodec)&&b.ext&&(b.container=b.ext+"_dash"),f.push(b)}}catch(e){y.e(e)}finally{y.f()}}if(0!=f.length){e.n=6;break}if(!d.licenseInfos){e.n=4;break}throw new Error("This video is DRM protected");case 4:if(f[0].url){e.n=5;break}throw new Error("the URL cannot be found in the first format");case 5:throw S=a.errorScreen,R=S?S.playerErrorMessageRenderer:{},reason=(0,client.q4)(R.reason)||a.reason,subreason=(0,client.q4)(R.subreason),subreason&&(reason+=","+subreason),new Error(reason||"formats list is empty");case 6:for(C=[],I=0,k=[s,u];I<k.length;I++){O=_createForOfIteratorHelper((P=k[I]).thumbnail?null===(N=P.thumbnail)||void 0===N?void 0:N.thumbnails:[]);try{for(O.s();!(A=O.n()).done;)M=A.value,C.push({height:M.height,url:M.url,width:M.width})}catch(e){O.e(e)}finally{O.f()}}D=s.channelId,j=s.lengthSeconds,U=[];try{i&&(U=null===(L=i.contents)||void 0===L||null===(L=L.twoColumnWatchNextResults)||void 0===L||null===(L=L.results)||void 0===L||null===(L=L.results)||void 0===L||null===(L=L.contents[1])||void 0===L||null===(L=L.videoSecondaryInfoRenderer)||void 0===L||null===(L=L.owner)||void 0===L||null===(L=L.videoOwnerRenderer)||void 0===L||null===(L=L.thumbnail)||void 0===L?void 0:L.thumbnails)}catch(e){}return t={isLive:h||!1,title:l,formats:f,thumbnails:C,description:p,category:[],duration:j,viewCount:s.viewCount,keywords:[],averageRating:s.averageRating,uploader:s.author,channelID:D,recommendInfo:i?(0,client.aZ)(i):[],avatar:U},D&&(t.channelURL="https://www.youtube.com/channel/"+D),e.a(2,t)}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"checkDataWithVideoId",value:function(e,t){if(!e)return!1;try{return JSON.parse(e).videoDetails.videoId===t}catch(e){}return!1}},{key:"mimetype2ext",value:function(e){if(!e)return"";var t={"audio/mp4":"m4a","audio/mpeg":"mp3"};if(e in t)return t[e];var r,n=e.split("/");try{r=n[1].split(";")[0].trim().toLowerCase()}catch(e){}return client.lO[r]||r}},{key:"parseCodecs",value:function(e){if(!e)return{};var t,r,n,o=this.helpTrim(e.trim()).split(",").map((function(e){return e.trim()})),i=_createForOfIteratorHelper(o);try{for(i.s();!(n=i.n()).done;){var a=n.value,c=a.split(".")[0];if(client.MY.includes(c))t||(t=a);else{if(!client.pj.includes(c))throw new Error("WARNING: Unkonwn codec "+a);r||(r=a)}}}catch(e){i.e(e)}finally{i.f()}return t||r?{vcodec:t||"",acodec:r||""}:2===o.length?{vcodec:o[0],acodec:o[1]}:{}}},{key:"helpTrim",value:function(e,t,r){return e.replace(t?"left"==r?new RegExp("^\\"+t+"+","g"):"right"==r?new RegExp("\\"+t+"+$","g"):new RegExp("^\\"+t+"+|\\"+t+"+$","g"):/^\s+|\s+$/g,"")}},{key:"getSignatureTimestamp",value:(r=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(){return api_extract_regenerator().w((function(e){for(;;)if(0===e.n)return e.a(2,"")}),e)}))),function(){return r.apply(this,arguments)})},{key:"getVisitorData",value:(t=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(){var t,r;return api_extract_regenerator().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,doRequest("https://www.youtube.com",{method:"GET",useDefaultLang:!0,extraHeaders:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.14 Safari/537.36"}});case 1:if(!(t=e.v).success){e.n=2;break}return r=(0,client.Js)(t.result,{isYouTube:!0}).ytcfg.get("VISITOR_DATA",""),e.a(2,r);case 2:return e.a(2,"")}}),e)}))),function(){return t.apply(this,arguments)})},{key:"videoId",value:function(e){return this.regexSearch(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/,e,1)}},{key:"regexSearch",value:function(e,t,r){var n=t.match(e);if(!n)throw new Error("matched regex search: "+e);return n[r]}},{key:"queryRelated",value:(e=api_extract_asyncToGenerator(api_extract_regenerator().m((function e(t,r){var n,o,i,a,c,s;return api_extract_regenerator().w((function(e){for(;;)switch(e.n){case 0:return n=client.Me.android.INNERTUBE_HOST,o=client.Me.android.INNERTUBE_API_KEY,i={"X-YouTube-Client-Name":client.Me.android.INNERTUBE_CONTEXT_CLIENT_NAME,"X-YouTube-Client-Version":client.Me.android.INNERTUBE_CONTEXT.client.clientVersion},e.n=1,doRequest("https://".concat(n,"/youtubei/v1/next?key=").concat(o),{method:"POST",extraHeaders:Object.assign({},i,{Origin:"https://"+n,"content-type":"application/json","User-Agent":UserAgent}),body:this.getAndroidPOSTBody(t,"android",r)});case 1:a=e.v,c=a.success,s=a.result,a.errCode,a.errMsg,c&&JSON.parse(s);case 2:return e.a(2)}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,o,i,a,c,s}(),BaseError=function(e){function t(e){var r;return api_extract_classCallCheck(this,t),(r=_callSuper(this,t,[e])).name=(this instanceof t?this.constructor:void 0).name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(r),this instanceof t?this.constructor:void 0),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(_assertThisInitialized(r),(this instanceof t?this.constructor:void 0).prototype):r.__proto__=(this instanceof t?this.constructor:void 0).prototype,r}return _inherits(t,e),api_extract_createClass(t)}(_wrapNativeSuper(Error)),RegexMismatchError=null,NotRetryError=function(e){function t(e){return api_extract_classCallCheck(this,t),_callSuper(this,t,["__notRetry@"+e])}return _inherits(t,e),api_extract_createClass(t)}(BaseError),api_extract_NetWorkError=function(e){function t(){return api_extract_classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),api_extract_createClass(t)}(BaseError),BackupExtractError=function(e){function t(){return api_extract_classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),api_extract_createClass(t)}(BaseError);function api_search_typeof(e){return api_search_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_search_typeof(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||api_search_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function api_search_createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=api_search_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function api_search_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return api_search_arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?api_search_arrayLikeToArray(e,t):void 0}}function api_search_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function api_search_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return api_search_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,s=e,f.n=r,a}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,i=l[t],d=f.p,_=i[2];r>3?(o=_===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,f.v=n,f.n=i[1]):d<_&&(o=r<3||i[0]>n||n>_)&&(i[4]=r,i[5]=n,f.n=_,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,l,_){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,_),c=l,s=_;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(api_search_regeneratorDefine2(t={},n,(function(){return this})),t),p=u.prototype=c.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,api_search_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=u,api_search_regeneratorDefine2(p,"constructor",u),api_search_regeneratorDefine2(u,"constructor",s),s.displayName="GeneratorFunction",api_search_regeneratorDefine2(u,o,"GeneratorFunction"),api_search_regeneratorDefine2(p),api_search_regeneratorDefine2(p,o,"Generator"),api_search_regeneratorDefine2(p,n,(function(){return this})),api_search_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(api_search_regenerator=function(){return{w:i,m:f}})()}function api_search_regeneratorDefine2(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}api_search_regeneratorDefine2=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){api_search_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},api_search_regeneratorDefine2(e,t,r,n)}function api_search_asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function api_search_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){api_search_asyncGeneratorStep(i,n,o,a,c,"next",e)}function c(e){api_search_asyncGeneratorStep(i,n,o,a,c,"throw",e)}a(void 0)}))}}function api_search_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function api_search_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,api_search_toPropertyKey(n.key),n)}}function api_search_createClass(e,t,r){return t&&api_search_defineProperties(e.prototype,t),r&&api_search_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function api_search_toPropertyKey(e){var t=api_search_toPrimitive(e,"string");return"symbol"==api_search_typeof(t)?t:t+""}function api_search_toPrimitive(e,t){if("object"!=api_search_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=api_search_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var BASE_URL="https://m.youtube.com",SearchApi=function(){return api_search_createClass((function e(){api_search_classCallCheck(this,e),this.initStatus="pending",this.initPromise=null,this.startInitStatus()}),[{key:"startInitStatus",value:(i=api_search_asyncToGenerator(api_search_regenerator().m((function e(){return api_search_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(!this.initPromise){e.n=1;break}return e.a(2,this.initPromise);case 1:return e.n=2,this.init();case 2:return"success"==this.initStatus?this.initPromise=!0:this.initPromise=!1,e.a(2,this.initPromise)}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getInitPrommise",value:function(){return this.initPromise}},{key:"init",value:(o=api_search_asyncToGenerator(api_search_regenerator().m((function e(){var t,r,n;return api_search_regenerator().w((function(e){for(;;)switch(e.n){case 0:return this.initStatus="pending",e.n=1,doRequest(BASE_URL,{method:"GET",extraHeaders:{"User-Agent":client.Q3},withoutCookie:!0});case 1:if((t=e.v).success)try{this.initPromise||(r=(0,client.Js)(t.result,{isYouTube:!0}),n=r.ytcfg,this.ytcfg=n,this.initStatus="success")}catch(e){this.initStatus="failure"}else this.initStatus="failure";case 2:return e.a(2)}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"doSearch",value:(n=api_search_asyncToGenerator(api_search_regenerator().m((function e(t,r){return api_search_regenerator().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this.startInitStatus();case 1:if(!e.v){e.n=3;break}return e.n=2,this.toSearch(t,r);case 2:return e.a(2,e.v);case 3:return e.a(2,{data:[],isReady:!1,code:500,success:!1})}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"getSearchHistory",value:(r=api_search_asyncToGenerator(api_search_regenerator().m((function e(){var t,r,n,o,i;return api_search_regenerator().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,doRequest(BASE_URL,{method:"GET",extraHeaders:{"User-Agent":client.Q3},withoutCookie:!1});case 1:if(!(t=e.v).success){e.n=2;break}try{n=(0,client.Js)(t.result,{isYouTube:!0}),o=n.ytcfg,r=o.data_.SBOX_SETTINGS}catch(e){}e.n=3;break;case 2:case 5:case 6:return e.a(2);case 3:return e.n=4,doRequest("https://"+r.SEARCHBOX_HOST_OVERRIDE+"/complete/search?client=youtube&ds=yt&q=&callback=google.sbox.p50&tok="+r.PSUGGEST_TOKEN,{method:"GET",withoutCookie:!1,extraHeaders:{Accept:"*/*",Referer:"https://www.youtube.com/","User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36"}});case 4:if(!(t=e.v).success){e.n=5;break}i=t.result.match(/google\.sbox\.p50\(([^\)]+)\)/);try{JSON.parse(i[1])[1].map((function(e){return e[0]}))}catch(e){}e.n=6}}),e)}))),function(){return r.apply(this,arguments)})},{key:"toSearch",value:(t=api_search_asyncToGenerator(api_search_regenerator().m((function e(t,r){var n,o,i,a,s,u,l,p,f,d,_,h,y,v,m,g,b,T,E,x,w,S,R;return api_search_regenerator().w((function(e){for(;;)switch(e.n){case 0:console.log("js.ytb.toSearch",{keyword:t,filter:r}),o={isReady:!0,code:200,success:!1},i={"User-Agent":client.Q3,Referer:"https://m.youtube.com/","X-YouTube-Client-Name":this.getCfg("INNERTUBE_CONTEXT_CLIENT_NAME"),"X-YouTube-Client-Version":this.getCfg("INNERTUBE_CONTEXT_CLIENT_VERSION"),"X-YouTube-Device":this.getCfg("DEVICE"),"X-YouTube-Page-CL":this.getCfg("PAGE_CL"),"X-YouTube-Page-Label":this.getCfg("PAGE_BUILD_LABEL"),"X-YouTube-Utc-Offset":String(-(new Date).getTimezoneOffset())};try{n=(new Intl.DateTimeFormat).resolvedOptions().timeZone}catch(e){}return n&&(i["X-YouTube-Time-Zone"]=n),e.p=1,e.n=2,doRequest("https://m.youtube.com/results?search_query="+encodeURIComponent(t)+"&pbj=1"+(r==client.vt.Playlist?"&sp=EgIQAw%3D%3D":r==client.vt.Track?"&sp=EgIQAQ%253D%253D":""),{method:"GET",extraHeaders:i,withoutCookie:!0});case 2:if(a=e.v,s=a.result,u=a.success,a.errMsg,u){e.n=3;break}throw new NetWorkError(c);case 3:l=JSON.parse(s),p=l.response.contents.sectionListRenderer.contents,f=api_search_createForOfIteratorHelper(p),e.p=4,f.s();case 5:if((d=f.n()).done){e.n=10;break}_=d.value,h=Object.keys(_)[0],y=_[h],w=h,e.n="universalWatchCardRenderer"===w?6:"itemSectionRenderer"===w?7:"continuationItemRenderer"===w?8:9;break;case 6:try{o.head={avatar:null===(v=y.header)||void 0===v||null===(v=v.watchCardRichHeaderRenderer)||void 0===v||null===(v=v.avatar)||void 0===v?void 0:v.thumbnails,title:(0,client.q4)(null===(m=y.header)||void 0===m||null===(m=m.watchCardRichHeaderRenderer)||void 0===m?void 0:m.title),subtitle:(0,client.q4)(null===(g=y.header)||void 0===g||null===(g=g.watchCardRichHeaderRenderer)||void 0===g?void 0:g.subtitle),coverlabel:(0,client.q4)(null===(b=y.callToAction)||void 0===b||null===(b=b.watchCardHeroVideoRenderer)||void 0===b||null===(b=b.callToActionButton)||void 0===b||null===(b=b.callToActionButtonRenderer)||void 0===b?void 0:b.label),url:null===(T=y.callToAction)||void 0===T||null===(T=T.watchCardHeroVideoRenderer)||void 0===T||null===(T=T.navigationEndpoint)||void 0===T||null===(T=T.commandMetadata)||void 0===T||null===(T=T.webCommandMetadata)||void 0===T?void 0:T.url,heroImage:null===(E=y.callToAction)||void 0===E||null===(E=E.watchCardHeroVideoRenderer)||void 0===E||null===(E=E.heroImage)||void 0===E?void 0:E.collageHeroImageRenderer,channelUrl:null===(x=y.header)||void 0===x||null===(x=x.watchCardRichHeaderRenderer)||void 0===x||null===(x=x.titleNavigationEndpoint)||void 0===x||null===(x=x.commandMetadata)||void 0===x||null===(x=x.webCommandMetadata)||void 0===x?void 0:x.url}}catch(e){}return e.a(3,9);case 7:return o.data=this.parseItemSectionRenderer(y.contents||[]).filter((function(e){return e})),r==client.vt.Playlist?o.data=o.data.filter((function(e){return"compactPlaylistRenderer"===e.type})):o.data=o.data.filter((function(e){return"compactVideoRenderer"===e.type})),e.a(3,9);case 8:o.next=y.continuationEndpoint.continuationCommand.token;case 9:e.n=5;break;case 10:e.n=12;break;case 11:e.p=11,S=e.v,f.e(S);case 12:return e.p=12,f.f(),e.f(12);case 13:o.success=!0,e.n=15;break;case 14:e.p=14,R=e.v,o.errorCode=R instanceof NetWorkError?400:500,o.data=[];case 15:return e.a(2,o)}}),e,this,[[4,11,12,13],[1,14]])}))),function(e,r){return t.apply(this,arguments)})},{key:"nextPage",value:(e=api_search_asyncToGenerator(api_search_regenerator().m((function e(t){var r,n,o,i,a,c,u,l,p,f;return api_search_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.ytb.nextPage",{next:t}),r={isReady:!0,code:200,success:!1},e.p=1,n="https://m.youtube.com/youtubei/v1/search?key="+this.getCfg("INNERTUBE_API_KEY"),e.n=2,doRequest(n,{method:"POST",extraHeaders:{"content-type":"application/json"},body:{context:this.getCfg("INNERTUBE_CONTEXT"),continuation:t}});case 2:if(o=e.v,i=o.result,a=o.success,o.errMsg,a){e.n=3;break}throw new NetWorkError(s);case 3:c=JSON.parse(i),u=_slicedToArray(c.onResponseReceivedCommands[0].appendContinuationItemsAction.continuationItems,2),l=u[0],p=u[1],l&&(r.data=this.parseItemSectionRenderer(l.itemSectionRenderer.contents).filter((function(e){return e}))),p&&(r.next=p.continuationItemRenderer.continuationEndpoint.continuationCommand.token),r.success=!0,e.n=5;break;case 4:e.p=4,f=e.v,r.errorCode=f instanceof NetWorkError?400:500,r.data=[];case 5:return e.a(2,r)}}),e,this,[[1,4]])}))),function(t){return e.apply(this,arguments)})},{key:"getCfg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.ytcfg&&this.ytcfg.data_||{};return e in r?r[e]:t}},{key:"parseItemSectionRenderer",value:function(e){return e.map((function(e){var t,r,n=Object.keys(e)[0],o=e[n];switch(n){case"compactVideoRenderer":return{type:n,data:{videoId:o.videoId,title:(0,client.q4)(o.title),thumbnails:o.thumbnail?o.thumbnail.thumbnails:[],author:(0,client.q4)(o.shortBylineText),publishedTime:(0,client.q4)(o.publishedTimeText),viewCountText:(0,client.q4)(o.viewCountText),shortViewCountText:(0,client.q4)(o.shortViewCountText),lengthText:(0,client.q4)(o.lengthText)}};case"videoWithContextRenderer":try{return"LIVE"!==o.thumbnailOverlays[0].thumbnailOverlayTimeStatusRenderer.style&&{type:"compactVideoRenderer",data:{videoId:o.videoId,title:(0,client.q4)(o.headline),thumbnails:o.thumbnail.thumbnails,author:(0,client.q4)(o.shortBylineText),publishedTime:(0,client.q4)(o.publishedTimeText),viewCountText:(0,client.q4)(o.viewCountText),shortViewCountText:(0,client.q4)(o.shortViewCountText),lengthText:(0,client.q4)(o.lengthText)}}}catch(e){return!1}case"horizontalCardListRenderer":var i=o.cards.map((function(e){var t,r,n=Object.keys(e)[0],o=e[n];return"searchRefinementCardRenderer"==n?{thumbnails:(null===(t=o.thumbnail)||void 0===t?void 0:t.thumbnails)||[],txt:(0,client.q4)(o.query),url:"https://www.youtube.com/playlist?list="+(null===(r=o.searchEndpoint)||void 0===r||null===(r=r.watchPlaylistEndpoint)||void 0===r?void 0:r.playlistId)}:{}}));return{type:n,data:{header:(0,client.q4)(null===(t=o.header)||void 0===t||null===(t=t.richListHeaderRenderer)||void 0===t?void 0:t.title),cards:i}};case"compactPlaylistRenderer":return{type:n,data:{id:o.playlistId,title:(0,client.q4)(o.title),thumbnails:(null===(r=o.thumbnail)||void 0===r?void 0:r.thumbnails)||[],author:(0,client.q4)(o.shortBylineText),videoCountShortText:(0,client.q4)(o.videoCountShortText),videoCountText:(0,client.q4)(o.videoCountText)}};case"reelShelfRenderer":return!1;default:return e}}))}}]);var e,t,r,n,o,i}();function api_music_typeof(e){return api_music_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_music_typeof(e)}function api_music_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return api_music_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,s=e,f.n=r,a}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,i=l[t],d=f.p,_=i[2];r>3?(o=_===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,f.v=n,f.n=i[1]):d<_&&(o=r<3||i[0]>n||n>_)&&(i[4]=r,i[5]=n,f.n=_,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,l,_){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,_),c=l,s=_;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(api_music_regeneratorDefine2(t={},n,(function(){return this})),t),p=u.prototype=c.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,api_music_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=u,api_music_regeneratorDefine2(p,"constructor",u),api_music_regeneratorDefine2(u,"constructor",s),s.displayName="GeneratorFunction",api_music_regeneratorDefine2(u,o,"GeneratorFunction"),api_music_regeneratorDefine2(p),api_music_regeneratorDefine2(p,o,"Generator"),api_music_regeneratorDefine2(p,n,(function(){return this})),api_music_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(api_music_regenerator=function(){return{w:i,m:f}})()}function api_music_regeneratorDefine2(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}api_music_regeneratorDefine2=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){api_music_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},api_music_regeneratorDefine2(e,t,r,n)}function api_music_asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function api_music_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){api_music_asyncGeneratorStep(i,n,o,a,c,"next",e)}function c(e){api_music_asyncGeneratorStep(i,n,o,a,c,"throw",e)}a(void 0)}))}}function api_music_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function api_music_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,api_music_toPropertyKey(n.key),n)}}function api_music_createClass(e,t,r){return t&&api_music_defineProperties(e.prototype,t),r&&api_music_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function api_music_toPropertyKey(e){var t=api_music_toPrimitive(e,"string");return"symbol"==api_music_typeof(t)?t:t+""}function api_music_toPrimitive(e,t){if("object"!=api_music_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=api_music_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var MusicApi=function(){return api_music_createClass((function e(){api_music_classCallCheck(this,e)}),[{key:"doSearch",value:(t=api_music_asyncToGenerator(api_music_regenerator().m((function e(t){var r,n,o,i,a,c,s,u,l,p=this;return api_music_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.music.doSearch",{keyword:t}),r={isReady:!0,code:200,success:!1,musicList:null},e.p=1,e.n=2,doRequest("https://music.youtube.com/youtubei/v1/search?key=AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30",{method:"POST",extraHeaders:{"User-Agent":client.Q3,"content-type":"application/json"},body:{query:t,params:"EgWKAQIIAWoMEAMQBBAOEAoQCRAF",context:{client:{hl:"en",visitorData:"Cgt1VzgwSnBwRVhBZyjw5Y-6BjIKCgJSVRIEGgAgOQ%3D%3D",clientName:"WEB_REMIX",gl:"US",clientVersion:"1.20241125.01.00"}}}});case 2:i=e.v,a=i.result,i.success,i.errMsg,c=JSON.parse(a),s=(null===(n=c.contents)||void 0===n||null===(n=n.tabbedSearchResultsRenderer)||void 0===n||null===(n=n.tabs[0])||void 0===n||null===(n=n.tabRenderer)||void 0===n||null===(n=n.content)||void 0===n||null===(n=n.sectionListRenderer)||void 0===n||null===(n=n.contents[0])||void 0===n?void 0:n.musicShelfRenderer)||{},r.next=null===(o=s.continuations[0])||void 0===o||null===(o=o.nextContinuationData)||void 0===o?void 0:o.continuation,u=s.contents||[],r.musicList=u.map((function(e){var t=e.musicResponsiveListItemRenderer||{},r=t.flexColumns||[];return 0==r.length?null:p.parseVideoInfo(t,r)})).filter((function(e){return e})),r.success=!0,e.n=4;break;case 3:e.p=3,l=e.v,console.log("js.music.doSearch - error",l.message),r.errorCode=500;case 4:return e.a(2,r)}}),e,null,[[1,3]])}))),function(e){return t.apply(this,arguments)})},{key:"parseVideoInfo",value:function(e,t){var r,n,o,i,a,c,s,u,l=(null===(r=e.thumbnail)||void 0===r||null===(r=r.musicThumbnailRenderer)||void 0===r||null===(r=r.thumbnail)||void 0===r?void 0:r.thumbnails)||[],p=l,f=null===(n=e.playlistItemData)||void 0===n?void 0:n.videoId,d="https://music.youtube.com/watch?v=".concat(f),_=((null===(o=t[0])||void 0===o||null===(o=o.musicResponsiveListItemFlexColumnRenderer)||void 0===o||null===(o=o.text)||void 0===o?void 0:o.runs[0])||{}).text,h=_;if(t.length>1){var y,v=(null===(y=t[1])||void 0===y||null===(y=y.musicResponsiveListItemFlexColumnRenderer)||void 0===y||null===(y=y.text)||void 0===y?void 0:y.runs)||[];i="".concat(v[0].text).concat(v[1].text).concat(v[2].text),a=v[2].text,v.length>4&&(c=v[4].text)}t.length>2&&(s=((null===(u=t[2])||void 0===u||null===(u=u.musicResponsiveListItemFlexColumnRenderer)||void 0===u||null===(u=u.text)||void 0===u?void 0:u.runs[0])||{}).text);return{thumbnails:l,thumbnail:p,videoId:f,url:d,title:_,name:h,author:i,subtitle:a,lengthText:c,viewCountText:s}}},{key:"nextPage",value:(e=api_music_asyncToGenerator(api_music_regenerator().m((function e(t){var r,n,o,i,a,c,s,u,l,p=this;return api_music_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.music.nextPage",{next:t}),r={isReady:!0,code:200,success:!1,musicList:null},e.p=1,i="https://music.youtube.com/youtubei/v1/search?key=AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30&ctoken=".concat(t,"&continuation=").concat(t,"&type=next"),e.n=2,doRequest(i,{method:"POST",extraHeaders:{"User-Agent":client.Q3,"content-type":"application/json"},body:{context:{client:{hl:"en",visitorData:"Cgt1VzgwSnBwRVhBZyjw5Y-6BjIKCgJSVRIEGgAgOQ%3D%3D",clientName:"WEB_REMIX",gl:"US",clientVersion:"1.20241118.01.00"}}}});case 2:a=e.v,c=a.result,a.success,a.errMsg,s=JSON.parse(c),u=null===(n=s.continuationContents)||void 0===n||null===(n=n.musicShelfContinuation)||void 0===n?void 0:n.contents,r.next=null===(o=s.continuationContents)||void 0===o||null===(o=o.musicShelfContinuation)||void 0===o||null===(o=o.continuations[0])||void 0===o||null===(o=o.nextContinuationData)||void 0===o?void 0:o.continuation,r.musicList=u.map((function(e){var t=e.musicResponsiveListItemRenderer||{},r=t.flexColumns||[];return 0==r.length?null:p.parseVideoInfoByNext(t,r)})).filter((function(e){return e})),r.success=!0,e.n=4;break;case 3:e.p=3,l=e.v,console.log("js.music.nextPage - error",l.message),r.errorCode=500;case 4:return e.a(2,r)}}),e,null,[[1,3]])}))),function(t){return e.apply(this,arguments)})},{key:"parseVideoInfoByNext",value:function(e,t){var r,n,o,i,a,c,s,u,l=(null===(r=e.thumbnail)||void 0===r||null===(r=r.musicThumbnailRenderer)||void 0===r||null===(r=r.thumbnail)||void 0===r?void 0:r.thumbnails)||[],p=l,f=(null===(n=t[0])||void 0===n||null===(n=n.musicResponsiveListItemFlexColumnRenderer)||void 0===n||null===(n=n.text)||void 0===n?void 0:n.runs[0])||{},d=null===(o=f.navigationEndpoint)||void 0===o||null===(o=o.watchEndpoint)||void 0===o?void 0:o.videoId,_="https://music.youtube.com/watch?v=".concat(d),h=f.text,y=h;if(t.length>1){var v,m=(null===(v=t[1])||void 0===v||null===(v=v.musicResponsiveListItemFlexColumnRenderer)||void 0===v||null===(v=v.text)||void 0===v?void 0:v.runs)||[];i="".concat(m[0].text).concat(m[1].text).concat(m[2].text),a=m[2].text,m.length>4&&(c=m[4].text)}t.length>2&&(s=((null===(u=t[2])||void 0===u||null===(u=u.musicResponsiveListItemFlexColumnRenderer)||void 0===u||null===(u=u.text)||void 0===u?void 0:u.runs[0])||{}).text);return{thumbnails:l,thumbnail:p,videoId:d,url:_,title:h,name:y,author:i,subtitle:a,lengthText:c,viewCountText:s}}}]);var e,t}();function api_home_typeof(e){return api_home_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_home_typeof(e)}function api_home_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return api_home_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,s=e,f.n=r,a}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,i=l[t],d=f.p,_=i[2];r>3?(o=_===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,f.v=n,f.n=i[1]):d<_&&(o=r<3||i[0]>n||n>_)&&(i[4]=r,i[5]=n,f.n=_,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,l,_){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,_),c=l,s=_;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(api_home_regeneratorDefine2(t={},n,(function(){return this})),t),p=u.prototype=c.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,api_home_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=u,api_home_regeneratorDefine2(p,"constructor",u),api_home_regeneratorDefine2(u,"constructor",s),s.displayName="GeneratorFunction",api_home_regeneratorDefine2(u,o,"GeneratorFunction"),api_home_regeneratorDefine2(p),api_home_regeneratorDefine2(p,o,"Generator"),api_home_regeneratorDefine2(p,n,(function(){return this})),api_home_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(api_home_regenerator=function(){return{w:i,m:f}})()}function api_home_regeneratorDefine2(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}api_home_regeneratorDefine2=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){api_home_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},api_home_regeneratorDefine2(e,t,r,n)}function api_home_asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function api_home_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){api_home_asyncGeneratorStep(i,n,o,a,c,"next",e)}function c(e){api_home_asyncGeneratorStep(i,n,o,a,c,"throw",e)}a(void 0)}))}}function api_home_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function api_home_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,api_home_toPropertyKey(n.key),n)}}function api_home_createClass(e,t,r){return t&&api_home_defineProperties(e.prototype,t),r&&api_home_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function api_home_toPropertyKey(e){var t=api_home_toPrimitive(e,"string");return"symbol"==api_home_typeof(t)?t:t+""}function api_home_toPrimitive(e,t){if("object"!=api_home_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=api_home_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var HomeApi=function(){return api_home_createClass((function e(){api_home_classCallCheck(this,e),this.visitorData="",this.hl=""}),[{key:"getYtbMusicHome",value:(n=api_home_asyncToGenerator(api_home_regenerator().m((function e(t,r,n){var o,i,a,c,s,u,l,p,f,d,_,h=this;return api_home_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.home.getYouTubeMusicHome",{browseId:t,hl:n}),null!=n&&n.length>0&&(this.hl=n),o={isReady:!0,code:200,success:!1},i={browseId:t,context:{client:{hl:this.hl,clientName:"WEB_REMIX",gl:"US",clientVersion:"1.20250630.03.00"}}},null!=r&&r.length>0&&(i.params=r),e.p=1,e.n=2,doRequest("https://music.youtube.com/youtubei/v1/browse?alt=json&key=AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30",{method:"POST",extraHeaders:{"User-Agent":client.Q3,"content-type":"application/json"},body:i});case 2:s=e.v,u=s.result,s.success,s.errMsg,l=JSON.parse(u),this.visitorData=l.responseContext.visitorData,p=(null===(a=l.contents)||void 0===a||null===(a=a.singleColumnBrowseResultsRenderer)||void 0===a||null===(a=a.tabs[0])||void 0===a||null===(a=a.tabRenderer)||void 0===a||null===(a=a.content)||void 0===a?void 0:a.sectionListRenderer)||{},(null===(c=p.continuations)||void 0===c?void 0:c.length)>0&&(o.next=null===(f=p.continuations[0])||void 0===f||null===(f=f.nextContinuationData)||void 0===f?void 0:f.continuation),d=p.contents||[],o.sectionList=d.map((function(e){return h.parseSectionData(e)})).filter((function(e){return(null==e?void 0:e.sectionTitle)&&(null==e?void 0:e.sectionContent)&&e.sectionContent.length>0})),o.success=!0,e.n=4;break;case 3:e.p=3,_=e.v,console.log("js.home.getYouTubeMusicHome - error",_.message),o.errorCode=500;case 4:return e.a(2,o)}}),e,this,[[1,3]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"nextPage",value:(r=api_home_asyncToGenerator(api_home_regenerator().m((function e(t){var r,n,o,i,a,c,s,u,l,p,f,d=this;return api_home_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.home.nextPage",{next:t}),r={isReady:!0,code:200,success:!1},e.p=1,i="https://music.youtube.com/youtubei/v1/browse?ctoken=".concat(t,"&continuation=").concat(t,"&type=next"),e.n=2,doRequest(i,{method:"POST",extraHeaders:{"User-Agent":client.Q3,"content-type":"application/json"},body:{context:{client:{visitorData:this.visitorData,hl:this.hl,clientName:"WEB_REMIX",gl:"US",clientVersion:"1.20250630.03.00"}}}});case 2:a=e.v,c=a.result,a.success,a.errMsg,s=JSON.parse(c),u=(null==s||null===(n=s.continuationContents)||void 0===n?void 0:n.sectionListContinuation)||{},(null===(o=u.continuations)||void 0===o?void 0:o.length)>0&&(r.next=null===(l=u.continuations[0])||void 0===l||null===(l=l.nextContinuationData)||void 0===l?void 0:l.continuation),p=u.contents||[],r.sectionList=p.map((function(e){return d.parseSectionData(e)})).filter((function(e){return(null==e?void 0:e.sectionTitle)&&(null==e?void 0:e.sectionContent)&&e.sectionContent.length>0})),r.success=!0,e.n=4;break;case 3:e.p=3,f=e.v,console.log("js.home.nextPage - error",f.message),r.errorCode=500;case 4:return e.a(2,r)}}),e,this,[[1,3]])}))),function(e){return r.apply(this,arguments)})},{key:"getYtbMusicHomePlist",value:(t=api_home_asyncToGenerator(api_home_regenerator().m((function e(t){var r,n,o,i,a,c,s,u,l,p,f;return api_home_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.home.getYtbMusicHomePlist",{browseId:t}),r={isReady:!0,code:200,success:!1},e.p=1,e.n=2,doRequest("https://music.youtube.com/youtubei/v1/browse?alt=json&key=AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30",{method:"POST",extraHeaders:{"User-Agent":client.Q3,"content-type":"application/json"},body:{browseId:t,context:{client:{hl:this.hl,clientName:"WEB_REMIX",gl:"US",clientVersion:"1.20250630.03.00"}}}});case 2:i=e.v,a=i.result,i.success,i.errMsg,c=JSON.parse(a),this.visitorData=c.responseContext.visitorData,s=(null===(n=c.contents)||void 0===n||null===(n=n.twoColumnBrowseResultsRenderer)||void 0===n?void 0:n.secondaryContents.sectionListRenderer)||{},(null===(o=s.continuations)||void 0===o?void 0:o.length)>0&&(r.next=null===(u=s.continuations[0])||void 0===u||null===(u=u.nextContinuationData)||void 0===u?void 0:u.continuation),l=s.contents[0],p=Object.keys(l)[0],r.data="musicPlaylistShelfRenderer"===p?this.getContent(l[p].contents,"playlist"):this.getContent(l[p].contents,"album"),r.success=!0,e.n=4;break;case 3:e.p=3,f=e.v,console.log("js.home.getYtbMusicHomePlist - error",f.message),r.errorCode=500;case 4:return e.a(2,r)}}),e,this,[[1,3]])}))),function(e){return t.apply(this,arguments)})},{key:"getYtbMusicCate",value:(e=api_home_asyncToGenerator(api_home_regenerator().m((function e(){var t,r,n,o,i,a,c,s,u=this;return api_home_regenerator().w((function(e){for(;;)switch(e.n){case 0:return console.log("js.home.getYtbMusicCate"),t={isReady:!0,code:200,success:!1},e.p=1,e.n=2,doRequest("https://music.youtube.com/youtubei/v1/browse?alt=json&key=AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30",{method:"POST",extraHeaders:{"User-Agent":client.Q3,"content-type":"application/json"},body:{browseId:"FEmusic_moods_and_genres",context:{client:{hl:this.hl,clientName:"WEB_REMIX",gl:"US",clientVersion:"1.20250630.03.00"}}}});case 2:n=e.v,o=n.result,n.success,n.errMsg,i=JSON.parse(o),a=(null===(r=i.contents)||void 0===r||null===(r=r.singleColumnBrowseResultsRenderer)||void 0===r||null===(r=r.tabs[0])||void 0===r||null===(r=r.tabRenderer)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.sectionListRenderer)||{},c=a.contents||[],t.cateList=c.map((function(e){return u.parseSectionData(e)})).filter((function(e){return(null==e?void 0:e.sectionTitle)&&(null==e?void 0:e.sectionContent)&&e.sectionContent.length>0})),t.success=!0,e.n=4;break;case 3:e.p=3,s=e.v,console.log("js.home.getYtbMusicCate - error",s.message),t.errorCode=500;case 4:return e.a(2,t)}}),e,this,[[1,3]])}))),function(){return e.apply(this,arguments)})},{key:"parseSectionData",value:function(e){var t,r,n,o,i,a=Object.keys(e)[0];switch(a){case"musicImmersiveCarouselShelfRenderer":case"musicCarouselShelfRenderer":case"gridRenderer":case"shelfRenderer":o=(n=e[a]).header?this.getHeaderText(n.header):n.title?this.getText(n.title):"",i=this.getContent(n.contents||n.items||(null===(t=n)||void 0===t||null===(t=t.content)||void 0===t||null===(t=t.horizontalListRenderer)||void 0===t?void 0:t.items)||(null===(r=n)||void 0===r||null===(r=r.content)||void 0===r||null===(r=r.expandedShelfContentsRenderer)||void 0===r?void 0:r.items)||[])}return{sectionTitle:o,sectionContent:i}}},{key:"getContent",value:function(e,t){var r=this;return e&&0!==e.length?e.map((function(e){var n,o,i=Object.keys(e)[0],a=e[i],c=r.getEndPoint(a),s=r.parsePageType(c);switch(i){case"musicNavigationButtonRenderer":return{buttonText:r.getText(a.buttonText),color:r.getColor(null===(n=a.solid)||void 0===n?void 0:n.leftStripeColor),browseId:a.clickCommand.browseEndpoint.browseId,params:a.clickCommand.browseEndpoint.params};case"musicTwoRowItemRenderer":var u=r.parseId(c,s);return{type:r.parseType(s),showType:"MUSIC_TWO_ROW_ITEM_THUMBNAIL_ASPECT_RATIO_SQUARE"===a.aspectRatio?1:2,data:{id:u,title:r.getText(a.title),author:r.getAuthor(a.subtitle),subtitle:r.getText(a.subtitle),thumbnail:r.getThumbnail(a.thumbnailRenderer),url:"https://music.youtube.com"+r.parseNavigationEndpoint(c)}};case"musicResponsiveListItemRenderer":var l=a.playlistItemData.videoId,p=l?"/watch?v=".concat(l):null,f=r.parseNavigationEndpoint(c)||p;if(!f)return!1;var d="",_="",h="";return"playlist"===t?d=r.getText(a.flexColumns[2].musicResponsiveListItemFlexColumnRenderer.text):"album"===t?(a.flexColumns.length>2&&(h=r.getText(a.flexColumns[2].musicResponsiveListItemFlexColumnRenderer.text)),a.flexColumns.length>3&&(d=r.getText(a.flexColumns[3].musicResponsiveListItemFlexColumnRenderer.text))):_=r.getText(a.flexColumns[1].musicResponsiveListItemFlexColumnRenderer.text),{type:r.parseType(s),showType:0,data:{videoId:l,isMusician:!0,rank:r.getText(null===(o=a.customIndexColumn)||void 0===o||null===(o=o.musicCustomIndexColumnRenderer)||void 0===o?void 0:o.text),title:r.getText(a.flexColumns[0].musicResponsiveListItemFlexColumnRenderer.text),author:r.getAuthor(a.flexColumns[1].musicResponsiveListItemFlexColumnRenderer.text),subtitle:_,lengthText:d,videoCountShortText:h,thumbnail:r.getThumbnail(a.thumbnail),url:"https://music.youtube.com"+f}};default:return!1}})).filter(Boolean):[]}},{key:"parseType",value:function(e){return"MUSIC_PAGE_TYPE_PLAYLIST"===e||"MUSIC_PAGE_TYPE_ALBUM"===e?"playlist":"MUSIC_VIDEO_TYPE_ATV"===e?"music":null!=e&&e.startsWith("MUSIC_VIDEO_TYPE")?"video":void 0}},{key:"getHeaderText",value:function(e){var t,r;return this.getText((null===(t=e.musicCarouselShelfBasicHeaderRenderer)||void 0===t?void 0:t.title)||(null===(r=e.gridHeaderRenderer)||void 0===r?void 0:r.title))}},{key:"getAuthor",value:function(e){return null!=e&&e.runs&&Array.isArray(e.runs)?null==e?void 0:e.runs[0].text:null}},{key:"getText",value:function(e){return null!=e&&e.runs&&Array.isArray(e.runs)?e.runs.map((function(e){return e.text})).join(""):null}},{key:"getThumbnail",value:function(e){var t;return null==e||null===(t=e.musicThumbnailRenderer)||void 0===t||null===(t=t.thumbnail)||void 0===t?void 0:t.thumbnails}},{key:"getColor",value:function(e){var t=e>>16&255,r=e>>8&255,n=255&e,o=(e>>>24&255)/255;return[t,r,n,255*o].every((function(e){return e===(255&e)}))?[t,r,n,o.toFixed(3)]:""}},{key:"getEndPoint",value:function(e){var t,r;if(e.navigationEndpoint)return e.navigationEndpoint;(null==e||null===(t=e.flexColumns)||void 0===t?void 0:t.length)>0&&(null==e||null===(r=e.flexColumns)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.musicResponsiveListItemFlexColumnRenderer)||void 0===r||null===(r=r.text)||void 0===r||null===(r=r.runs)||void 0===r||r.navigationEndpoint);return null}},{key:"parsePageType",value:function(e){var t,r,n=null==e||null===(t=e.browseEndpoint)||void 0===t||null===(t=t.browseEndpointContextSupportedConfigs)||void 0===t?void 0:t.browseEndpointContextMusicConfig,o=null==e||null===(r=e.watchEndpoint)||void 0===r||null===(r=r.watchEndpointMusicSupportedConfigs)||void 0===r?void 0:r.watchEndpointMusicConfig;return(null==n?void 0:n.pageType)||(null==o?void 0:o.musicVideoType)}},{key:"parseId",value:function(e,t){switch(t){case"MUSIC_PAGE_TYPE_ARTIST":var r;return null==e||null===(r=e.browseEndpoint)||void 0===r?void 0:r.browseId;case"MUSIC_PAGE_TYPE_PLAYLIST":var n;return null==e||null===(n=e.browseEndpoint)||void 0===n?void 0:n.browseId;case"MUSIC_PAGE_TYPE_ALBUM":var o;return null==e||null===(o=e.browseEndpoint)||void 0===o?void 0:o.browseId;case"MUSIC_VIDEO_TYPE_UGC":case"MUSIC_VIDEO_TYPE_OMV":var i,a,c=null==e||null===(i=e.watchEndpoint)||void 0===i?void 0:i.videoId,s=null==e||null===(a=e.watchEndpoint)||void 0===a?void 0:a.playlistId;return s||(c||"");default:return""}}},{key:"parseNavigationEndpoint",value:function(e){var t=this.parsePageType(e),r=this.parseId(e,t);switch(t){case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_ALBUM":return"/channel/".concat(r);case"MUSIC_PAGE_TYPE_PLAYLIST":return r;case"MUSIC_VIDEO_TYPE_UGC":case"MUSIC_VIDEO_TYPE_OMV":var n,o,i=null==e||null===(n=e.watchEndpoint)||void 0===n?void 0:n.videoId,a=null==e||null===(o=e.watchEndpoint)||void 0===o?void 0:o.playlistId,c="/watch?";return a&&(c+="list=".concat(a,"&")),i&&(c+="v=".concat(i)),c;default:return""}}}]);var e,t,r,n}();function extractor_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return extractor_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,s=e,f.n=r,a}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,i=l[t],d=f.p,_=i[2];r>3?(o=_===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,f.v=n,f.n=i[1]):d<_&&(o=r<3||i[0]>n||n>_)&&(i[4]=r,i[5]=n,f.n=_,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,l,_){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,_),c=l,s=_;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(extractor_regeneratorDefine2(t={},n,(function(){return this})),t),p=u.prototype=c.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,extractor_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=u,extractor_regeneratorDefine2(p,"constructor",u),extractor_regeneratorDefine2(u,"constructor",s),s.displayName="GeneratorFunction",extractor_regeneratorDefine2(u,o,"GeneratorFunction"),extractor_regeneratorDefine2(p),extractor_regeneratorDefine2(p,o,"Generator"),extractor_regeneratorDefine2(p,n,(function(){return this})),extractor_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(extractor_regenerator=function(){return{w:i,m:f}})()}function extractor_regeneratorDefine2(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}extractor_regeneratorDefine2=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){extractor_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},extractor_regeneratorDefine2(e,t,r,n)}function extractor_asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function extractor_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){extractor_asyncGeneratorStep(i,n,o,a,c,"next",e)}function c(e){extractor_asyncGeneratorStep(i,n,o,a,c,"throw",e)}a(void 0)}))}}var extractApi=new ExtractApi,searchApi=new SearchApi,musicApi=new MusicApi,homeApi=new HomeApi;function postMessageToJSBridge(e){return _postMessageToJSBridge.apply(this,arguments)}function _postMessageToJSBridge(){return(_postMessageToJSBridge=extractor_asyncToGenerator(extractor_regenerator().m((function e(r){var n,o,i,a,c;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(n=JSON.parse(r),o=n.uid,i=n.event,a=n.source,c=n.data,console.log("js.postMessageToJSBridge -----",{uid:o,event:i,source:a,data:c}),i!=client.Y_.Extract){e.n=2;break}return e.n=1,handleExtract(n);case 1:return e.a(2,e.v);case 2:if(i!=client.Y_.Related){e.n=3;break}e.n=6;break;case 3:if(i!=client.Y_.Search){e.n=5;break}return e.n=4,handleSearch(n);case 4:return e.a(2,e.v);case 5:t.event===client.Y_.Layout&&client.sF.SC;case 6:return e.a(2)}}),e)})))).apply(this,arguments)}function handleExtract(e){return _handleExtract.apply(this,arguments)}function _handleExtract(){return(_handleExtract=extractor_asyncToGenerator(extractor_regenerator().m((function e(t){var r,n,o,i,a,c,s,u,l,p,f,d,_,h,y,v,m,g,b,T,E,x,w,S,R,C,I,k;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(t.uid,t.event,r=t.source,!(n=t.data)||!n.url){e.n=15;break}if(r!=client.sF.YTB){e.n=14;break}if(o=t.data.url,i=(0,client.i5)(o),a=i.v,-1!=(c=o.indexOf("youtu.be/"))&&(a=o.substring(c+9)),s=i.list,u=-1!=o.indexOf("/channel/MPREb_"),a){e.n=1;break}return l=createErrorMsg(t,"url is invaild",{url:o}),e.a(2,sendMessageToNative(l));case 1:if(f=-1!=(p=o).indexOf("music.youtube.com"),d=-1!=p.indexOf("youtube.com")||-1!=p.indexOf("youtu.be/"),!f&&!d){e.n=11;break}if(p="https://"+(f?"music":"www")+".youtube.com/watch",a&&(p+="?v="+a),s&&(p+=(a?"&":"?")+"list="+s),_={music:null,library:null,url:p,errMsg:""},h={},y="",!a){e.n=3;break}return e.n=2,extractVideoDetail(p);case 2:h=e.v,(v=h).success,m=v.data,g=v.errorMSG,_.music=m,y=g;case 3:if(!s||!h.success){e.n=10;break}if(e.p=4,!f){e.n=6;break}return e.n=5,extractYouTubeMusicPlaylist(p);case 5:b=e.v,e.n=8;break;case 6:return e.n=7,extractYouTubePlaylist(p);case 7:b=e.v;case 8:(T=b).success,E=T.data,T.errorMSG,_.library=E,e.n=10;break;case 9:e.p=9,k=e.v,console.log("js.extractYouTubePlaylist - error",k.message);case 10:return x=createExtractMsg(t,_,y),e.a(2,sendMessageToNative(x));case 11:if(!u){e.n=13;break}return w={library:null,url:p},e.n=12,extractYtbMusicChannelPlaylist(p);case 12:return S=e.v,S.success,R=S.data,C=S.errMsg,w.library=R,I=createExtractMsg(t,w,C),e.a(2,sendMessageToNative(I));case 13:e.n=15;break;case 14:r==client.sF.SC||client.sF.FB;case 15:return e.a(2)}}),e,null,[[4,9]])})))).apply(this,arguments)}function handleSearch(e){return _handleSearch.apply(this,arguments)}function _handleSearch(){return(_handleSearch=extractor_asyncToGenerator(extractor_regenerator().m((function e(r){var n,o,i,a,c,s,u,l,p,f,d,_,h,y,v,m,g,b,T,E,x,w,S;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(r.uid,r.event,n=r.source,o=r.data,i=o.keyword,a=o.browseId,c=o.next,s=o.filter,u=o.params,l=o.hl,i=decodeURIComponent(i),n!=client.sF.YTB){e.n=11;break}if(s!=client.vt.YouTubeMusic){e.n=2;break}return e.n=1,searchYtbByMusic(i,c);case 1:return p=e.v,p.success,f=p.data,p.errorMSG,d=createSearchMsg(r,f),e.a(2,sendMessageToNative(d));case 2:if(s!==client.vt.YtbMusicHome){e.n=4;break}return e.n=3,searchYtbMusicHome(a,c,u,l);case 3:return _=e.v,_.success,h=_.data,_.errorMSG,y=createSearchMsg(r,h),e.a(2,sendMessageToNative(y));case 4:if(s!==client.vt.YtbMusicHomePlist){e.n=6;break}return e.n=5,searchYtbMusicHomePlist(a,c);case 5:return v=e.v,v.success,m=v.data,v.errorMSG,g=createSearchMsg(r,m),e.a(2,sendMessageToNative(g));case 6:if(s!==client.vt.YtbMoodsAndGenres){e.n=8;break}return e.n=7,searchYtbMoodsAndGenres();case 7:return b=e.v,b.success,T=b.data,b.errorMSG,E=createSearchMsg(r,T),e.a(2,sendMessageToNative(E));case 8:return e.n=9,searchYtbByFilter(i,c,s);case 9:return x=e.v,x.success,w=x.data,x.errorMSG,S=createSearchMsg(r,w),e.a(2,sendMessageToNative(S));case 10:e.n=12;break;case 11:n==client.sF.SC||(t.source,client.sF.FB);case 12:return e.a(2)}}),e)})))).apply(this,arguments)}function searchYtbByMusic(e,t){return _searchYtbByMusic.apply(this,arguments)}function _searchYtbByMusic(){return(_searchYtbByMusic=extractor_asyncToGenerator(extractor_regenerator().m((function e(t,r){var n,o,i;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(n={success:!1,data:null,errorMSG:client.h2.DEFAULT},e.p=1,!r){e.n=3;break}return e.n=2,musicApi.nextPage(r);case 2:o=e.v,e.n=5;break;case 3:return e.n=4,musicApi.doSearch(t);case 4:o=e.v;case 5:n.data=o,n.success=!0,e.n=7;break;case 6:e.p=6,i=e.v,n.errorMSG=i.message||client.h2.DEFAULT,console.log("js.searchYtbByMusic - error:",i.message);case 7:return e.a(2,n)}}),e,null,[[1,6]])})))).apply(this,arguments)}function searchYtbByFilter(e,t,r){return _searchYtbByFilter.apply(this,arguments)}function _searchYtbByFilter(){return(_searchYtbByFilter=extractor_asyncToGenerator(extractor_regenerator().m((function e(t,r,n){var o,i,a;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(o={success:!1,data:null,errorMSG:client.h2.DEFAULT},e.p=1,!r){e.n=3;break}return e.n=2,searchApi.nextPage(r);case 2:i=e.v,e.n=5;break;case 3:return e.n=4,searchApi.doSearch(t,n);case 4:i=e.v;case 5:o.data=i,o.success=!0,e.n=7;break;case 6:e.p=6,a=e.v,o.errorMSG=a.message||client.h2.DEFAULT,console.log("js.searchYtbByFilter - error:",a.message);case 7:return e.a(2,o)}}),e,null,[[1,6]])})))).apply(this,arguments)}function searchYtbMusicHome(e,t,r,n){return _searchYtbMusicHome.apply(this,arguments)}function _searchYtbMusicHome(){return(_searchYtbMusicHome=extractor_asyncToGenerator(extractor_regenerator().m((function e(t,r,n,o){var i,a,c;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(i={success:!1,data:null,errorMSG:client.h2.DEFAULT},e.p=1,!r){e.n=3;break}return e.n=2,homeApi.nextPage(r);case 2:a=e.v,e.n=5;break;case 3:return e.n=4,homeApi.getYtbMusicHome(t,n,o);case 4:a=e.v;case 5:i.data=a,i.success=!0,e.n=7;break;case 6:e.p=6,c=e.v,i.errorMSG=c.message||client.h2.DEFAULT,console.log("js.searchYtbByFilter - error:",c.message);case 7:return e.a(2,i)}}),e,null,[[1,6]])})))).apply(this,arguments)}function searchYtbMusicHomePlist(e,t){return _searchYtbMusicHomePlist.apply(this,arguments)}function _searchYtbMusicHomePlist(){return(_searchYtbMusicHomePlist=extractor_asyncToGenerator(extractor_regenerator().m((function e(t,r){var n,o,i;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:if(n={success:!1,data:null,errorMSG:client.h2.DEFAULT},e.p=1,!r){e.n=3;break}return e.n=2,homeApi.nextPage(r);case 2:o=e.v,e.n=5;break;case 3:return e.n=4,homeApi.getYtbMusicHomePlist(t);case 4:o=e.v;case 5:n.data=o,n.success=!0,e.n=7;break;case 6:e.p=6,i=e.v,n.errorMSG=i.message||client.h2.DEFAULT,console.log("js.searchYtbByFilter - error:",i.message);case 7:return e.a(2,n)}}),e,null,[[1,6]])})))).apply(this,arguments)}function searchYtbMoodsAndGenres(){return _searchYtbMoodsAndGenres.apply(this,arguments)}function _searchYtbMoodsAndGenres(){return(_searchYtbMoodsAndGenres=extractor_asyncToGenerator(extractor_regenerator().m((function e(){var t,r;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:return t={success:!1,data:null,errorMSG:client.h2.DEFAULT},e.p=1,e.n=2,homeApi.getYtbMusicCate();case 2:t.data=e.v,t.success=!0,e.n=4;break;case 3:e.p=3,r=e.v,t.errorMSG=r.message||client.h2.DEFAULT,console.log("js.handleYtbMoodsAndGenres - error:",r.message);case 4:return e.a(2,t)}}),e,null,[[1,3]])})))).apply(this,arguments)}function extractVideoDetail(e,t,r){return _extractVideoDetail.apply(this,arguments)}function _extractVideoDetail(){return(_extractVideoDetail=extractor_asyncToGenerator(extractor_regenerator().m((function e(t,r,n){var o,i,a,c;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:return o={success:!1,data:null,url:t,errorMSG:client.h2.DEFAULT,source:r},e.p=1,e.n=2,queryUserInfo();case 2:return i=e.v,e.n=3,extractApi.queryVideoInfo(t,i);case 3:(a=e.v).webURL=t,o.videoId=a.videoId,o.data=a,o.success=!0,e.n=5;break;case 4:e.p=4,c=e.v,o.errorMSG=c.message||client.h2.DEFAULT,console.log("js.extractVideoDetail error:",c.message);case 5:return e.a(2,o)}}),e,null,[[1,4]])})))).apply(this,arguments)}function extractYouTubePlaylist(e){return _extractYouTubePlaylist.apply(this,arguments)}function _extractYouTubePlaylist(){return(_extractYouTubePlaylist=extractor_asyncToGenerator(extractor_regenerator().m((function e(t){var r,n;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:return r={success:!1,data:null,url:t,type:"youtube_playlist"},e.p=1,e.n=2,extractApi.getVideoFromPlayList(t);case 2:r.data=e.v,r.success=!0,e.n=4;break;case 3:e.p=3,n=e.v,r.errMsg=n.message||"unknow error",console.log("js.extractYouTubePlaylist error:",n.message);case 4:return e.a(2,r)}}),e,null,[[1,3]])})))).apply(this,arguments)}function extractYouTubeMusicPlaylist(e){return _extractYouTubeMusicPlaylist.apply(this,arguments)}function _extractYouTubeMusicPlaylist(){return(_extractYouTubeMusicPlaylist=extractor_asyncToGenerator(extractor_regenerator().m((function e(t){var r,n;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:return r={success:!1,data:null,url:t,type:"youtube_music_playlist"},e.p=1,e.n=2,extractApi.getYouTubeMusicPlayList(t);case 2:r.data=e.v,r.success=!0,e.n=4;break;case 3:e.p=3,n=e.v,r.errMsg=n.message||"unknow error",console.log("js.extractYouTubeMusicPlaylist error:",n.message);case 4:return e.a(2,r)}}),e,null,[[1,3]])})))).apply(this,arguments)}function extractYtbMusicChannelPlaylist(){return _extractYtbMusicChannelPlaylist.apply(this,arguments)}function _extractYtbMusicChannelPlaylist(){return(_extractYtbMusicChannelPlaylist=extractor_asyncToGenerator(extractor_regenerator().m((function e(){return extractor_regenerator().w((function(e){for(;;)if(0===e.n)return e.a(2,{success:!1,data:null})}),e)})))).apply(this,arguments)}function test(e){return _test.apply(this,arguments)}function _test(){return(_test=extractor_asyncToGenerator(extractor_regenerator().m((function e(t){var r;return extractor_regenerator().w((function(e){for(;;)switch(e.n){case 0:return t=JSON.parse(t),console.log("postMessageToJSBridge ---------",{uid:t.uid,source:t.source}),e.n=1,getRemoteConfig("dy_jsconext_config2");case 1:return r=e.v,console.log("getRemoteConfig---------",{ret:r}),t.data=CLIENTS.android,e.a(2,{client:CLIENTS.android})}}),e)})))).apply(this,arguments)}function createExtractMsg(e,t,r){return Object.assign({},e,{data:{success:!0,errorMsg:r||"",data:t}})}function createSearchMsg(e,t){return Object.assign({},e,{data:t})}function createErrorMsg(e,t,r){return Object.assign({},e,{data:{success:!1,errorMsg:t,data:r}})}return __webpack_exports__})()));
